import{r as K,a as g,c as B,b as G,o as a,d as l,e as s,u as o,t as u,f as N,w as y,v,F as _,g as w,h as J,i as Q,W as R,C as X,j as Y,k as Z}from"./vendor.d1ba3474.js";const $=function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))c(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function m(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerpolicy&&(i.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?i.credentials="include":e.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(e){if(e.ep)return;e.ep=!0;const i=m(e);fetch(e.href,i)}};$();const ee=s("div",null,[s("a",{href:"https://jie-yu.gitbook.io/voodoo-coin-white-paper/"}," white book")],-1),te=s("div",null,[s("a",{href:"https://github.com/jsdfsdf/jsdfsdf.github.io"}," github")],-1),se={class:"wallet"},ne={key:0},oe={key:1},ae={key:1,class:"wallet"},le=s("p",{class:"wallet"},"my address",-1),re={class:"wallet"},ce={class:"wallet"},ie={key:0,class:"wallet",href:"https://docs.polygon.technology/docs/develop/metamask/config-polygon-on-metamask/"},ue={key:0,class:"wallet"},de={key:0,class:"wallet",href:"https://faucet.polygon.technology/"},fe={class:"wallet"},he=s("p",null,"top ten recent ",-1),pe={class:"wallet"},ge=s("p",null,"top active ten history ",-1),me={class:"wallet"},_e=s("img",{src:"https://ipfs.io/ipfs/bafybeibfqywnrbtd5seoo33tzqyg5trqyjawt2d6uvr4hpjgid5ddaypqm/124.jpg",width:"500",height:"500",style:{border:"5px solid black"}},null,-1),we={setup(F){var f,m,c;const e=K({hasMeta:!1,isLogged:!1,account:"",_to:"",msg:"",network:"",balance:0,checkBalance:0,balanceOf:0,look_address:""}),i=g(-1),p=g([]),k=g([]),b=g([]),x=g([]),M=g([]),C=g([]),V="0xc5C4280884F91b3C998927D1DB69d951b9eB3723",q=["function balanceOf(address account) external view returns (uint256)","function mint(address to, string memory newMessage) external","event NewMessages(address indexed from, address indexed to, string newStr)"];typeof window.ethereum!="undefined"?(console.log("MetaMask is installed!"),e.hasMeta=!0):e.hasMeta=!1;async function L(){f=new R(window.ethereum),await f.send("eth_requestAccounts",[]),e.isLogged=!0,m=f.getSigner(),e.account=await m.getAddress(),await P(),await T(),c=new X(V,q,f)}async function A(){e.balanceOf=await c.balanceOf(e.checkBalance)}async function j(){c=c.connect(m),await c.mint(e._to,e.msg)}async function P(){e.network=(await f.getNetwork()).chainId,i.value=e.network.chainId}async function T(){e.balance=await m.getBalance()}async function D(){p.value=[],k.value=[];const r=c.filters.NewMessages(),n=-3600*24*1/24,d=await c.queryFilter(r,n);i.value=d;const t={},H=d.map(h=>h.args[1]);for(const h of H)t[h]=t[h]?t[h]+1:1;i.value=t;for(const[h,O]of Object.entries(t))p.value.push({address:h,num:O}),k.value.push({address:h,num:O});await I()}async function I(){b.value=[];for(const r of k.value)b.value.push({address:r.address,num:await c.balanceOf(r.address)})}async function S(){M.value=[];const r=c.filters.NewMessages(e.look_address,null),n=-3600*24*1/24,d=await c.queryFilter(r,n);for(const t of d)M.value.push({address:t.args[1],msg:t.args[2]})}async function U(){C.value=[];const r=c.filters.NewMessages(null,e.look_address),n=-3600*24*1/24,d=await c.queryFilter(r,n);for(const t of d)C.value.push({address:t.args[0],msg:t.args[2]})}async function E(){await c.on("NewMessages",(r,n,d)=>{x.value.push({address_from:r,address_to:n,msg:d})})}const W=B(()=>{const r="num";return p.value.sort(function(d,t){return t[r]-d[r]})}),z=B(()=>{const r="num";return b.value.sort(function(n,d){return d[r]-n[r]})});return(r,n)=>{const d=G("h");return a(),l(_,null,[ee,te,s("div",se,[o(e).isLogged?(a(),l("div",ae,[le,s("p",re,u(o(e).account),1),s("p",ce,"chain Id: "+u(o(e).network),1),o(e).network!=80001?(a(),l("a",ie," follow guide to switch to Polygon's Mumbai-Testnet and go back refresh")):N("",!0)])):(a(),l("div",ne,[o(e).hasMeta?(a(),l("button",{key:0,onClick:L},"connect wallet now ")):(a(),l("h1",oe,"Oh no Metamask \u{1F622}"))]))]),o(e).isLogged?(a(),l("div",ue,[y(s("input",{"onUpdate:modelValue":n[0]||(n[0]=t=>o(e)._to=t),placeholder:"Address here"},null,512),[[v,o(e)._to]]),y(s("input",{"onUpdate:modelValue":n[1]||(n[1]=t=>o(e).msg=t),placeholder:"msg here"},null,512),[[v,o(e).msg]]),o(e).balance==0?(a(),l("a",de," use Polygon Faucet to get free test matic")):N("",!0),s("button",{onClick:j}," mint "),y(s("input",{"onUpdate:modelValue":n[2]||(n[2]=t=>o(e).checkBalance=t),placeholder:"Address here"},null,512),[[v,o(e).checkBalance]]),s("button",{onClick:A}," balance: "+u(o(e).balanceOf),1),s("button",{onClick:D},"query leader board: "+u(i.value),1)])):N("",!0),s("div",fe,[he,s("ul",null,[(a(!0),l(_,null,w(o(W),t=>(a(),l("li",null,u(t.address)+" "+u(t.num),1))),256))])]),s("div",pe,[ge,s("ul",null,[(a(!0),l(_,null,w(o(z),t=>(a(),l("li",null,u(t.address)+" "+u(t.num),1))),256))])]),s("div",me,[J(d,null,{default:Q(()=>[Y(" look for people "+u(o(e).look_address),1)]),_:1}),y(s("input",{"onUpdate:modelValue":n[3]||(n[3]=t=>o(e).look_address=t),placeholder:"Address here"},null,512),[[v,o(e).look_address]]),s("button",{onClick:S}," sent "),s("ul",null,[(a(!0),l(_,null,w(M.value,t=>(a(),l("li",{key:t.address},u(t.address)+" "+u(t.msg),1))),128))]),s("button",{onClick:U}," received "),s("ul",null,[(a(!0),l(_,null,w(C.value,t=>(a(),l("li",{key:t.address},u(t.address)+" "+u(t.msg),1))),128))])]),_e,s("div",null,[s("button",{onClick:E},"see_chat"),s("ul",null,[(a(!0),l(_,null,w(x.value,t=>(a(),l("li",{key:t.num},u(t.address_from)+" "+u(t.address_to)+" "+u(t.msg),1))),128))])])],64)}}};Z(we).mount("#app");
